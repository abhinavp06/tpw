<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Art of Deep Listening - The Philosopher's Window</title>
    <link rel="stylesheet" href="../../css/style.css" />
  </head>
  <body>
    <nav class="navigation">
      <div class="nav-container">
        <a href="../../index.html" class="nav-logo">The Philosopher's Window</a>
        <ul class="nav-menu">
          <li><a href="../../index.html" class="nav-link">Home</a></li>
          <li><a href="../../album.html" class="nav-link">Albums</a></li>
          <li><a href="../../blogs.html" class="nav-link">Blogs</a></li>
        </ul>
      </div>
    </nav>

    <main class="main-content">
      <article class="blog-article">
        <header class="article-header">
          <a href="../../blogs.html" class="back-link">‚Üê back to blogs</a>
        </header>

        <div class="article-content" id="blog-content">
          <!-- Blog content will be loaded here -->
        </div>
      </article>
    </main>

    <script src="../../js/main.js"></script>
    <script>
      // Load and render the blog content
      document.addEventListener("DOMContentLoaded", async () => {
        try {
          const response = await fetch("blog.md");
          const content = await response.text();

          // Simple markdown to HTML conversion
          const htmlContent = convertMarkdownToHtml(content);
          document.getElementById("blog-content").innerHTML = htmlContent;
        } catch (error) {
          console.error("Error loading blog content:", error);
          document.getElementById("blog-content").innerHTML =
            "<p>Error loading blog content.</p>";
        }
      });

      function convertMarkdownToHtml(markdown) {
        let html = markdown;

        // Convert headers
        html = html.replace(/^### (.*$)/gm, "<h3>$1</h3>");
        html = html.replace(/^## (.*$)/gm, "<h2>$1</h2>");
        html = html.replace(/^# (.*$)/gm, "<h1>$1</h1>");

        // Convert emphasis
        html = html.replace(/\*\*(.*?)\*\*/g, "<strong>$1</strong>");
        html = html.replace(/\*(.*?)\*/g, "<em>$1</em>");

        // Convert paragraphs
        html = html
          .split("\n\n")
          .map((paragraph) => {
            paragraph = paragraph.trim();
            if (
              paragraph === "" ||
              paragraph.startsWith("<h") ||
              paragraph.startsWith("---")
            ) {
              return paragraph;
            }
            return `<p>${paragraph.replace(/\n/g, "<br>")}</p>`;
          })
          .join("\n\n");

        return html;
      }
    </script>
  </body>
</html>
